Example using wifi + mqtt + adc.

For every period of time, it read the value on the ADC1 channel 7, and send data over mqtt topic.

Configure the URL of broker, username and password in menuconfig, also configure the credentials for wifi connection.